---
title: Az Azure-t és a Azure Stack Edge-t használó készletek észlelése
description: Ismerje meg, hogyan használhatja az Azure-t és a Azure Stack Edge-szolgáltatásokat a készletek észlelésének megvalósítására.
author: BryanLa
ms.topic: article
ms.date: 11/05/2019
ms.author: bryanla
ms.reviewer: anajod
ms.lastreviewed: 11/05/2019
ms.openlocfilehash: 865f63bc4234e50ed169aa29cefdb1886750594c
ms.sourcegitcommit: bb3e40b210f86173568a47ba18c3cc50d4a40607
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 06/17/2020
ms.locfileid: "84911187"
---
# <a name="out-of-stock-detection-at-the-edge-pattern"></a><span data-ttu-id="e0495-103">Az állományon kívüli észlelés az Edge-mintán</span><span class="sxs-lookup"><span data-stu-id="e0495-103">Out of stock detection at the edge pattern</span></span>

<span data-ttu-id="e0495-104">Ez a minta azt szemlélteti, hogyan állapítható meg, hogy a polcok kifogytak-e a Azure Stack Edge vagy Azure IoT Edge eszköz-és hálózati kamerák használatával.</span><span class="sxs-lookup"><span data-stu-id="e0495-104">This pattern illustrates how to determine if shelves have out of stock items using an Azure Stack Edge or Azure IoT Edge device and network cameras.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="e0495-105">Kontextus és probléma</span><span class="sxs-lookup"><span data-stu-id="e0495-105">Context and problem</span></span>

<span data-ttu-id="e0495-106">A fizikai kiskereskedelmi tárolók elvesztik az értékesítést, mert amikor az ügyfelek megkeresik az elemeket, nem jelennek meg a polcon.</span><span class="sxs-lookup"><span data-stu-id="e0495-106">Physical retail stores lose sales because when customers look for an item, it's not present on the shelf.</span></span> <span data-ttu-id="e0495-107">Előfordulhat azonban, hogy az elem a tároló hátulján volt, és nem lett újratárolva.</span><span class="sxs-lookup"><span data-stu-id="e0495-107">However, the item could have been in the back of the store and not been restocked.</span></span> <span data-ttu-id="e0495-108">A tárolók hatékonyabban szeretnék használni a munkatársaikat, és automatikusan értesítést kapnak, ha az elemek újrakészletezést igényelnek.</span><span class="sxs-lookup"><span data-stu-id="e0495-108">Stores would like to use their staff more efficiently and get automatically notified when items need restocking.</span></span>

## <a name="solution"></a><span data-ttu-id="e0495-109">Megoldás</span><span class="sxs-lookup"><span data-stu-id="e0495-109">Solution</span></span>

<span data-ttu-id="e0495-110">A megoldás példája egy peremhálózati eszközt használ, például az egyes tárolókban lévő Azure Stack Edge-t, amely hatékonyan dolgozza fel az áruházban lévő kamerák adatait.</span><span class="sxs-lookup"><span data-stu-id="e0495-110">The solution example uses an edge device, like an Azure Stack Edge in each store, which efficiently processes data from cameras in the store.</span></span> <span data-ttu-id="e0495-111">Ez az optimalizált kialakítás lehetővé teszi, hogy a tárolók csak a releváns eseményeket és képeket küldjenek a felhőbe.</span><span class="sxs-lookup"><span data-stu-id="e0495-111">This optimized design lets stores send only relevant events and images to the cloud.</span></span> <span data-ttu-id="e0495-112">A kialakítás csökkenti a sávszélességet, a tárterületet, és gondoskodik az ügyfelek adatainak védelméről.</span><span class="sxs-lookup"><span data-stu-id="e0495-112">The design saves bandwidth, storage space, and ensures customer privacy.</span></span> <span data-ttu-id="e0495-113">Mivel a rendszer minden kamerából beolvassa a képkockákat, egy ML-modell dolgozza fel a rendszerképet, és visszaadja az összes területet.</span><span class="sxs-lookup"><span data-stu-id="e0495-113">As frames are read from each camera, an ML model processes the image and returns any out of stock areas.</span></span> <span data-ttu-id="e0495-114">Egy helyi webalkalmazásban megjelenik a rendszerkép és a készleten kívüli terület.</span><span class="sxs-lookup"><span data-stu-id="e0495-114">The image and out of stock areas are displayed on a local web app.</span></span> <span data-ttu-id="e0495-115">Ezeket az információkat elküldheti egy idősorozat-betekintési környezetnek, hogy betekintést kapjon Power BI.</span><span class="sxs-lookup"><span data-stu-id="e0495-115">This data can be sent to a Time Series Insight environment to show insights in Power BI.</span></span>

![Az Edge-megoldás architektúrája](media/pattern-out-of-stock-at-edge/solution-architecture.png)

<span data-ttu-id="e0495-117">A megoldás működése:</span><span class="sxs-lookup"><span data-stu-id="e0495-117">Here's how the solution works:</span></span>

1. <span data-ttu-id="e0495-118">A lemezképek egy hálózati kamerából, HTTP vagy RTSP protokollon keresztül vannak rögzítve.</span><span class="sxs-lookup"><span data-stu-id="e0495-118">Images are captured from a network camera over HTTP or RTSP.</span></span>
2. <span data-ttu-id="e0495-119">A rendszer átméretezi a lemezképet, és elküldi a következtetést, amely a ML-modellel kommunikálva megállapítja, hogy vannak-e a készleten kívüli rendszerképek.</span><span class="sxs-lookup"><span data-stu-id="e0495-119">The image is resized and sent to the inference driver, which communicates with the ML model to determine if there are any out of stock images.</span></span>
3. <span data-ttu-id="e0495-120">A ML-modell a készletből származó összes területet visszaadja.</span><span class="sxs-lookup"><span data-stu-id="e0495-120">The ML model returns any out of stock areas.</span></span>
4. <span data-ttu-id="e0495-121">A következtetésre vezető illesztőprogram feltölti a nyers képet egy blobba (ha meg van adva), és elküldi az eredményeket a modellből az Azure IoT Hub és az eszközön lévő határolókeret processzorra.</span><span class="sxs-lookup"><span data-stu-id="e0495-121">The inferencing driver uploads the raw image to a blob (if specified), and sends the results from the model to Azure IoT Hub and a bounding box processor on the device.</span></span>
5. <span data-ttu-id="e0495-122">A határolókeret processzora hozzáadja a kapcsolódó mezőket a képhez, és gyorsítótárazza a rendszerkép elérési útját egy memóriában tárolt adatbázisban.</span><span class="sxs-lookup"><span data-stu-id="e0495-122">The bounding box processor adds bounding boxes to the image and caches the image path in an in-memory database.</span></span>
6. <span data-ttu-id="e0495-123">A webalkalmazás lekérdezi a képeket, és a kapott sorrendben jeleníti meg azokat.</span><span class="sxs-lookup"><span data-stu-id="e0495-123">The web app queries for images and shows them in the order received.</span></span>
7. <span data-ttu-id="e0495-124">A IoT Hubból származó üzenetek Time Series Insightsban vannak összesítve.</span><span class="sxs-lookup"><span data-stu-id="e0495-124">Messages from IoT Hub are aggregated in Time Series Insights.</span></span>
8. <span data-ttu-id="e0495-125">Power BI interaktív jelentést jelenít meg a készleten kívüli elemekről a Time Series Insightsból származó adatokkal.</span><span class="sxs-lookup"><span data-stu-id="e0495-125">Power BI displays an interactive report of out of stock items over time with the data from Time Series Insights.</span></span>


## <a name="components"></a><span data-ttu-id="e0495-126">Összetevők</span><span class="sxs-lookup"><span data-stu-id="e0495-126">Components</span></span>

<span data-ttu-id="e0495-127">Ez a megoldás a következő összetevőket használja:</span><span class="sxs-lookup"><span data-stu-id="e0495-127">This solution uses the following components:</span></span>

| <span data-ttu-id="e0495-128">Réteg</span><span class="sxs-lookup"><span data-stu-id="e0495-128">Layer</span></span> | <span data-ttu-id="e0495-129">Összetevő</span><span class="sxs-lookup"><span data-stu-id="e0495-129">Component</span></span> | <span data-ttu-id="e0495-130">Description</span><span class="sxs-lookup"><span data-stu-id="e0495-130">Description</span></span> |
|----------|-----------|-------------|
| <span data-ttu-id="e0495-131">Helyszíni hardver</span><span class="sxs-lookup"><span data-stu-id="e0495-131">On-premises hardware</span></span> | <span data-ttu-id="e0495-132">Hálózati kamera</span><span class="sxs-lookup"><span data-stu-id="e0495-132">Network camera</span></span> | <span data-ttu-id="e0495-133">Szükség van egy hálózati kamerára, vagy egy HTTP-vagy RTSP-hírcsatornával, hogy megismertesse a képeket a következtetésekhez.</span><span class="sxs-lookup"><span data-stu-id="e0495-133">A network camera is required, with either an HTTP or RTSP feed to provide the images for inference.</span></span> |
| <span data-ttu-id="e0495-134">Azure</span><span class="sxs-lookup"><span data-stu-id="e0495-134">Azure</span></span> | <span data-ttu-id="e0495-135">Azure IoT Hub</span><span class="sxs-lookup"><span data-stu-id="e0495-135">Azure IoT Hub</span></span> | <span data-ttu-id="e0495-136">Az [Azure IoT hub](/azure/iot-hub/) kezeli az eszközök üzembe helyezését és üzenetküldését az Edge-eszközökön.</span><span class="sxs-lookup"><span data-stu-id="e0495-136">[Azure IoT Hub](/azure/iot-hub/) handles device provisioning and messaging for the edge devices.</span></span> |
|  | <span data-ttu-id="e0495-137">Azure Time Series Insights</span><span class="sxs-lookup"><span data-stu-id="e0495-137">Azure Time Series Insights</span></span> | <span data-ttu-id="e0495-138">A [Azure Time Series Insights](/azure/time-series-insights/) az üzeneteket a IoT hub a vizualizációk számára tárolja.</span><span class="sxs-lookup"><span data-stu-id="e0495-138">[Azure Time Series Insights](/azure/time-series-insights/) stores the messages from IoT Hub for visualization.</span></span> |
|  | <span data-ttu-id="e0495-139">Power BI</span><span class="sxs-lookup"><span data-stu-id="e0495-139">Power BI</span></span> | <span data-ttu-id="e0495-140">A [Microsoft Power bi](https://powerbi.microsoft.com/) üzleti célú jelentéseket biztosít a készleten kívüli eseményekről.</span><span class="sxs-lookup"><span data-stu-id="e0495-140">[Microsoft Power BI](https://powerbi.microsoft.com/) provides business-focused reports of out of stock events.</span></span> <span data-ttu-id="e0495-141">A Power BI egy könnyen használható irányítópult-felületet biztosít a Azure Stream Analytics kimenetének megtekintéséhez.</span><span class="sxs-lookup"><span data-stu-id="e0495-141">Power BI provides an easy-to-use dashboard interface for viewing the output from Azure Stream Analytics.</span></span> |
| <span data-ttu-id="e0495-142">Azure Stack Edge vagy</span><span class="sxs-lookup"><span data-stu-id="e0495-142">Azure Stack Edge or</span></span><br><span data-ttu-id="e0495-143">Eszköz Azure IoT Edge</span><span class="sxs-lookup"><span data-stu-id="e0495-143">Azure IoT Edge device</span></span> | <span data-ttu-id="e0495-144">Azure IoT Edge</span><span class="sxs-lookup"><span data-stu-id="e0495-144">Azure IoT Edge</span></span> | <span data-ttu-id="e0495-145">[Azure IoT Edge](/azure/iot-edge/) összehangolja a futtatókörnyezetet a helyszíni tárolók számára, és kezeli az eszközkezelés és a frissítések kezelését.</span><span class="sxs-lookup"><span data-stu-id="e0495-145">[Azure IoT Edge](/azure/iot-edge/) orchestrates the runtime for the on-premises containers and handles device management and updates.</span></span>|
| | <span data-ttu-id="e0495-146">Azure Project agyhullám</span><span class="sxs-lookup"><span data-stu-id="e0495-146">Azure project brainwave</span></span> | <span data-ttu-id="e0495-147">Azure Stack Edge-eszközön a [Project agyhullám](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) a Field-programozható Gate-tömböket (FPGA) használja a ml-következtetések felgyorsításához.</span><span class="sxs-lookup"><span data-stu-id="e0495-147">On an Azure Stack Edge device, [Project Brainwave](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) uses Field-Programmable Gate Arrays (FPGAs) to accelerate ML inferencing.</span></span>|

## <a name="issues-and-considerations"></a><span data-ttu-id="e0495-148">Problémák és megfontolandó szempontok</span><span class="sxs-lookup"><span data-stu-id="e0495-148">Issues and considerations</span></span>

<span data-ttu-id="e0495-149">A megoldás megvalósításának eldöntése során vegye figyelembe a következő szempontokat:</span><span class="sxs-lookup"><span data-stu-id="e0495-149">Consider the following points when deciding how to implement this solution:</span></span>

### <a name="scalability"></a><span data-ttu-id="e0495-150">Méretezhetőség</span><span class="sxs-lookup"><span data-stu-id="e0495-150">Scalability</span></span>

<span data-ttu-id="e0495-151">A gépi tanulási modellek többsége a megadott hardvertől függően csak bizonyos számú képkockán futhat.</span><span class="sxs-lookup"><span data-stu-id="e0495-151">Most machine learning models can only run at a certain number of frames per second, depending on the provided hardware.</span></span> <span data-ttu-id="e0495-152">Határozza meg a fényképezőgép (ek) optimális mintavételi sebességét, hogy a ML-folyamat ne legyen biztonsági másolat.</span><span class="sxs-lookup"><span data-stu-id="e0495-152">Determine the optimal sample rate from your camera(s) to ensure that the ML pipeline doesn't back up.</span></span> <span data-ttu-id="e0495-153">A különböző típusú hardverek különböző számú kamerát és képkockákat fognak kezelni.</span><span class="sxs-lookup"><span data-stu-id="e0495-153">Different types of hardware will handle different numbers of cameras and frame rates.</span></span>

### <a name="availability"></a><span data-ttu-id="e0495-154">Rendelkezésre állás</span><span class="sxs-lookup"><span data-stu-id="e0495-154">Availability</span></span>

<span data-ttu-id="e0495-155">Fontos figyelembe venni, hogy mi történik, ha a peremhálózati eszköz elveszti a kapcsolódást.</span><span class="sxs-lookup"><span data-stu-id="e0495-155">It's important to consider what might happen if the edge device loses connectivity.</span></span> <span data-ttu-id="e0495-156">Vegye figyelembe, hogy milyen adatok elveszhetnek a Time Series Insights és Power BI irányítópulton.</span><span class="sxs-lookup"><span data-stu-id="e0495-156">Consider what data might be lost from the Time Series Insights and Power BI dashboard.</span></span> <span data-ttu-id="e0495-157">A példaként megadott megoldás nem kiválóan elérhető.</span><span class="sxs-lookup"><span data-stu-id="e0495-157">The example solution as provided isn't designed to be highly available.</span></span>

### <a name="manageability"></a><span data-ttu-id="e0495-158">Kezelhetőség</span><span class="sxs-lookup"><span data-stu-id="e0495-158">Manageability</span></span>

<span data-ttu-id="e0495-159">Ez a megoldás számos eszközre és helyszínre képes, így nem lehet megszerezni a megoldást.</span><span class="sxs-lookup"><span data-stu-id="e0495-159">This solution can span many devices and locations, which could get unwieldy.</span></span> <span data-ttu-id="e0495-160">Az Azure IoT szolgáltatásai automatikusan online állapotba helyezhetik az új telephelyeket és eszközöket, és naprakészen tarthatják őket.</span><span class="sxs-lookup"><span data-stu-id="e0495-160">Azure's IoT services can automatically bring new locations and devices online and keep them up to date.</span></span> <span data-ttu-id="e0495-161">A megfelelő adatirányítási eljárásokat is követni kell.</span><span class="sxs-lookup"><span data-stu-id="e0495-161">Proper data governance procedures must be followed as well.</span></span>

### <a name="security"></a><span data-ttu-id="e0495-162">Biztonság</span><span class="sxs-lookup"><span data-stu-id="e0495-162">Security</span></span>

<span data-ttu-id="e0495-163">Ez a minta a potenciálisan bizalmas adatokat kezeli.</span><span class="sxs-lookup"><span data-stu-id="e0495-163">This pattern handles potentially sensitive data.</span></span> <span data-ttu-id="e0495-164">Győződjön meg arról, hogy a kulcsok rendszeresen el vannak forgatva, és az Azure Storage-fiókra és a helyi megosztásokra vonatkozó engedélyek megfelelően vannak beállítva.</span><span class="sxs-lookup"><span data-stu-id="e0495-164">Make sure keys are regularly rotated and the permissions on the Azure Storage Account and local shares are correctly set.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e0495-165">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="e0495-165">Next steps</span></span>

<span data-ttu-id="e0495-166">További információ a cikkben bemutatott témakörökről:</span><span class="sxs-lookup"><span data-stu-id="e0495-166">To learn more about topics introduced in this article:</span></span>
- <span data-ttu-id="e0495-167">Ebben a mintában több IoT kapcsolódó szolgáltatás is használatos, beleértve a [Azure IoT Edge](/azure/iot-edge/), az [Azure IoT Hub](/azure/iot-hub/)és a [Azure Time Series Insights](/azure/time-series-insights/).</span><span class="sxs-lookup"><span data-stu-id="e0495-167">Multiple IoT related services are used in this pattern, including [Azure IoT Edge](/azure/iot-edge/), [Azure IoT Hub](/azure/iot-hub/), and [Azure Time Series Insights](/azure/time-series-insights/).</span></span>
- <span data-ttu-id="e0495-168">Ha többet szeretne megtudni a Microsoft Project agyhullám, tekintse meg [a blog bejelentését](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) , és a [Project agyhullám videójában vegye fel az Azure gyorsított Machine learning](https://www.youtube.com/watch?v=DJfMobMjCX0).</span><span class="sxs-lookup"><span data-stu-id="e0495-168">To learn more about Microsoft Project Brainwave, see [the blog announcement](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) and checkout out the [Azure Accelerated Machine Learning with Project Brainwave video](https://www.youtube.com/watch?v=DJfMobMjCX0).</span></span>
- <span data-ttu-id="e0495-169">Az ajánlott eljárásokról és a további kérdésekre adott válaszokért tekintse meg a [hibrid alkalmazások kialakításával kapcsolatos szempontokat](overview-app-design-considerations.md) .</span><span class="sxs-lookup"><span data-stu-id="e0495-169">See [Hybrid app design considerations](overview-app-design-considerations.md) to learn more about best practices and to get answers to any additional questions.</span></span>
- <span data-ttu-id="e0495-170">A termékek és megoldások teljes portfóliójának megismeréséhez tekintse meg a [Azure stack termékcsaládot és megoldásokat](/azure-stack) .</span><span class="sxs-lookup"><span data-stu-id="e0495-170">See the [Azure Stack family of products and solutions](/azure-stack) to learn more about the entire portfolio of products and solutions.</span></span>

<span data-ttu-id="e0495-171">Ha készen áll a megoldás tesztelésére, folytassa az [elemzési megoldás üzembe helyezési útmutatója](https://aka.ms/edgeinferencingdeploy)című témakörben foglalt szintű adatelemzéssel.</span><span class="sxs-lookup"><span data-stu-id="e0495-171">When you're ready to test the solution example, continue with the [Tiered data for analytics solution deployment guide](https://aka.ms/edgeinferencingdeploy).</span></span> <span data-ttu-id="e0495-172">A telepítési útmutató részletes útmutatást nyújt az összetevők üzembe helyezéséhez és teszteléséhez.</span><span class="sxs-lookup"><span data-stu-id="e0495-172">The deployment guide provides step-by-step instructions for deploying and testing its components.</span></span>
